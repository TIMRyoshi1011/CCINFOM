CREATE DATABASE THEATERSHOWS;
use THEATERSHOWS;

-- only this part was generated by lucidchart, I wrote the codes above to create the database first 
CREATE TABLE `staff` (
  `STAFF_ID` INT,
  `FIRST_NAME` VARCHAR(50),
  `LAST_NAME` VARCHAR(50),
  `POSITION` VARCHAR(50),
  `STATUS` VARCHAR(50),
  `SHIFT` VARCHAR(50),
  `SALARY` DECIMAL,
  PRIMARY KEY (`STAFF_ID`)
);

CREATE TABLE `theaters` (
  `THEATER_ID` INT,
  `CAPACITY` INT,
  `LAYOUT` VARCHAR(50),
  `STATUS` VARCHAR(50),
  `AVAILABLE_DATE` DATE,
  `AVAILABLE_TIME` TIME,
  PRIMARY KEY (`THEATER_ID`)
);

CREATE TABLE `shows` (
  `SHOW_ID` VARCHAR(50),
  `TITLE` VARCHAR(50),
  `RUNTIME` TIME,
  `START_TIME` TIME,
  `END_TIME` TIME,
  `STATUS` VARCHAR(50),
  `THEATER_ID` INT,
  PRIMARY KEY (`SHOW_ID`),
  FOREIGN KEY (`THEATER_ID`)
      REFERENCES `theaters`(`THEATER_ID`)
);

CREATE TABLE `staff_assignment` (
  `STAFF_ID` INT,
  `SHOW_ID` VARCHAR(50),
  `ASSIGNMENT_DATE` DATE,
  PRIMARY KEY (`STAFF_ID`, `SHOW_ID`),
  FOREIGN KEY (`SHOW_ID`)
      REFERENCES `shows`(`SHOW_ID`),
  FOREIGN KEY (`STAFF_ID`)
      REFERENCES `staff`(`STAFF_ID`)
);

CREATE TABLE `customers` (
  `CUSTOMER_ID` INT,
  `FIRST_NAME` VARCHAR(50),
  `LAST_NAME` VARCHAR(50),
  `PHONE_NUMBER` INT,
  `EMAIL_ADDRESS` VARCHAR(50),
  PRIMARY KEY (`CUSTOMER_ID`)
);

CREATE TABLE `payment` (
  `PAYMENT_ID` INT,
  `AMOUNT` DECIMAL,
  `STATUS` VARCHAR(50),
  `PAYMENT_DATE` DATE,
  PRIMARY KEY (`PAYMENT_ID`)
);

CREATE TABLE `booking` (
  `BOOKING_ID` INT,
  `CUSTOMER_ID` INT,
  `SHOW_ID` VARCHAR(50),
  `PAYMENT_ID` INT,
  `THEATER_ID` INT,
  `NOOFTICKETS` INT,
  `PRICE` DECIMAL,
  `STATUS` VARCHAR(50),
  `BOOKING_DATE` DATE,
  PRIMARY KEY (`BOOKING_ID`),
  FOREIGN KEY (`SHOW_ID`)
      REFERENCES `shows`(`SHOW_ID`),
  FOREIGN KEY (`CUSTOMER_ID`)
      REFERENCES `customers`(`CUSTOMER_ID`),
  FOREIGN KEY (`THEATER_ID`)
      REFERENCES `theaters`(`THEATER_ID`),
  FOREIGN KEY (`PAYMENT_ID`)
      REFERENCES `payment`(`PAYMENT_ID`)
);

-- Go to database tab, click reverse engineer and just select next until finish
